<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex">
  <link rel="icon" id="icon" href="/assets/img/salyte.jpg">

  <script src="/assets/js/cdn-rocket.js?v=3" defer></script>
  <link rel="stylesheet" href="/assets/css/app.css?v=3">
  <link rel="stylesheet" href="/assets/css/menu.css?v=3">

  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js?v=3"></script>
  <script src="/assets/js/anym.js?v=3"></script>

  <title>Dashboard | Salyte</title>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HWLK0PZVBM"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-HWLK0PZVBM');
  </script>
</head>

<body>

<!-- ðŸ” PASSWORD OVERLAY -->
<div id="authOverlay" style="
  position:fixed;
  inset:0;
  background:#020617;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999999;
  color:white;
  font-family:sans-serif;
">
  <div style="
    background:#020617;
    padding:24px;
    border-radius:10px;
    width:280px;
    text-align:center;
  ">
    <h2>Enter Password</h2>
    <input
      type="password"
      id="authPw"
      placeholder="Password"
      style="width:100%;padding:10px;margin-top:10px;border-radius:6px;border:none;"
    >
    <button
      onclick="authLogin()"
      style="width:100%;margin-top:12px;padding:10px;border:none;border-radius:6px;background:#2563eb;color:white;cursor:pointer;"
    >
      Continue
    </button>
    <p id="authErr" style="color:#f87171;margin-top:10px;"></p>
  </div>
</div>

<!-- ðŸ”¥ FIREBASE + GOOGLE LOGIN -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import {
    getAuth,
    GoogleAuthProvider,
    signInWithPopup,
    signOut,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCJ7echa_fnQY5eS_ZcDSuCvckzxQKPK5Y",
    authDomain: "tfg-80b6d.firebaseapp.com",
    projectId: "tfg-80b6d",
    storageBucket: "tfg-80b6d.firebasestorage.app",
    messagingSenderId: "966847356792",
    appId: "1:966847356792:web:b230ffa2a9447f0e0f328d",
    measurementId: "G-YS06XJCNMR"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();

  // âŒ BLOCKED EMAILS
  const blockedEmails = [
    "sebastianishot68@gmail.com",
    "31jgiroux14@epschoolsri.com",
    "31lmckay74@epschoolsri.com"
  ];

  async function googleLogin() {
    const result = await signInWithPopup(auth, provider);
    const email = result.user.email;

    if (blockedEmails.includes(email)) {
      alert("ðŸš« This email is blocked from accessing this site.");
      await signOut(auth);
      document.body.innerHTML = "";
      return;
    }

    console.log("Allowed:", email);
  }

  onAuthStateChanged(auth, user => {
    if (!user) {
      googleLogin();
    } else {
      if (blockedEmails.includes(user.email)) {
        alert("ðŸš« Access denied.");
        signOut(auth);
        document.body.innerHTML = "";
      }
    }
  });
</script>

<!-- ðŸ”‘ PASSWORD SCRIPT -->
<script>
(function () {
  const PASSWORD = "ChAnGeMe!@#$%^&*9";

  const overlay = document.getElementById("authOverlay");

  if (localStorage.getItem("auth") === "true") {
    overlay.remove();
    return;
  }

  window.authLogin = function () {
    const val = document.getElementById("authPw").value;

    if (val === PASSWORD) {
      localStorage.setItem("auth", "true");
      overlay.remove();
    } else {
      document.getElementById("authErr").textContent = "Wrong password";
    }
  };
})();
</script>

<!-- APP FILES -->
<script src="/baremux/index.js?v=3"></script>
<script src="/wk/wk2.js?v=3"></script>
<script src="/wk/wk3.js?v=3"></script>

<script src="/assets/js/main.js?v=3"></script>
<script src="/assets/js/index.js?v=3"></script>
<script src="/assets/js/themes.js?v=3"></script>
<script src="/assets/js/particles.js?v=3"></script>
<script src="/assets/js/register.js?v=3" defer></script>

</body>
</html>
